% Seminar: Modele ARCH/GARCH - Test de Recapitulare și Exerciții Practice

\documentclass[9pt, aspectratio=169, t]{beamer}
\input{preamble}
\subtitle{Seminar 5: Modele GARCH}

\begin{document}

{
\setbeamertemplate{headline}{}
\setbeamertemplate{footline}{}
\begin{frame}
    \titlepage
\end{frame}
}


%=============================================================================
% TABLE OF CONTENTS
%=============================================================================
\begin{frame}{Cuprins Seminar}
    \tableofcontents
\end{frame}

%=============================================================================
% SECTION 1: QUIZ
%=============================================================================
\section{Test de Recapitulare}

%-----------------------------------------------------------------------------
% Quiz 1
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 1}
    \begin{block}{Ce reprezintă ``gruparea volatilității (\emph{volatility clustering})''?}
        \begin{enumerate}[(A)]
            \item Volatilitatea este constantă în timp
            \item Perioadele de volatilitate ridicată sunt urmate de perioade de volatilitate ridicată
            \item Randamentele sunt corelate în timp
            \item Distribuția randamentelor este normală
        \end{enumerate}
    \end{block}

    \vspace{0.5cm}

    \begin{center}
        \textit{Gândiți-vă la comportamentul piețelor financiare în perioadele de criză...}
    \end{center}
\end{frame}

\begin{frame}{Răspuns Întrebarea 1}
    \begin{exampleblock}{Răspuns Corect: (B)}
        \textbf{Perioadele de volatilitate ridicată sunt urmate de perioade de volatilitate ridicată}
    \end{exampleblock}

    \pause
    \begin{block}{Explicație}
        \begin{itemize}
            \item \textbf{Volatility clustering} este un fapt stilizat observat în seriile financiare
            \item Perioadele de volatilitate ridicată (cu mișcări mari) tind să persiste
            \item Perioadele de stabilitate relativă (cu mișcări mici) tind și ele să persiste
            \item Aceasta implică că varianța condiționată $\sigma_t^2$ este \textbf{predictibilă}
            \item Modelele GARCH captează exact acest fenomen!
        \end{itemize}
    \end{block}
    \quantlet{TSA\_ch5\_clustering}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_clustering}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 2
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 2}
    \begin{block}{În modelul GARCH(1,1): $\sigma_t^2 = \omega + \alpha \varepsilon_{t-1}^2 + \beta \sigma_{t-1}^2$}
        Ce reprezintă parametrul $\alpha$?
        \begin{enumerate}[(A)]
            \item Persistența volatilității
            \item Nivelul de bază al volatilității
            \item Reacția la șocuri recente (news coefficient)
            \item Varianța necondiționată
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 2}
    \begin{exampleblock}{Răspuns Corect: (C)}
        \textbf{Reacția la șocuri recente (news coefficient)}
    \end{exampleblock}

    \pause
    \begin{block}{Interpretarea Parametrilor GARCH(1,1)}
        \begin{itemize}
            \item $\omega$ = nivelul de bază (floor) al volatilității
            \item $\alpha$ = \textbf{reacția} la pătratele inovațiilor (``news'')
            \item $\beta$ = \textbf{persistența} volatilității (memory)
            \item $\alpha + \beta$ = persistența totală
        \end{itemize}

        \vspace{0.3cm}
        Un $\alpha$ mare înseamnă că volatilitatea reacționează puternic la șocuri recente.
    \end{block}
    \quantlet{TSA\_ch5\_garch\_sim}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_garch_sim}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 3
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 3}
    \begin{block}{Care este condiția de stationaritate pentru GARCH(1,1)?}
        \begin{enumerate}[(A)]
            \item $\omega > 0$
            \item $\alpha + \beta = 1$
            \item $\alpha + \beta < 1$
            \item $\alpha > \beta$
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 3}
    \begin{exampleblock}{Răspuns Corect: (C)}
        \textbf{$\alpha + \beta < 1$}
    \end{exampleblock}

    \pause
    \begin{block}{Condiții Complete}
        Pentru stationaritatea GARCH(1,1):
        \begin{itemize}
            \item $\omega > 0$ (asigură varianță pozitivă)
            \item $\alpha \geq 0$, $\beta \geq 0$ (non-negativitate)
            \item $\alpha + \beta < 1$ (\textbf{stationaritate în covarianță})
        \end{itemize}

        \vspace{0.3cm}
        Dacă $\alpha + \beta = 1$ $\Rightarrow$ IGARCH (șocurile au efect permanent)
    \end{block}
    \quantlet{TSA\_ch5\_garch\_sim}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_garch_sim}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 4
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 4}
    \begin{block}{Care este formula varianței necondiționate în GARCH(1,1)?}
        \begin{enumerate}[(A)]
            \item $\bar{\sigma}^2 = \omega$
            \item $\bar{\sigma}^2 = \dfrac{\omega}{1 - \alpha}$
            \item $\bar{\sigma}^2 = \dfrac{\omega}{1 - \alpha - \beta}$
            \item $\bar{\sigma}^2 = \dfrac{\omega}{\alpha + \beta}$
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 4}
    \begin{exampleblock}{Răspuns Corect: (C)}
        $\bar{\sigma}^2 = \dfrac{\omega}{1 - \alpha - \beta}$
    \end{exampleblock}

    \pause
    \begin{block}{Demonstrație}
        Luând așteptarea necondiționată a GARCH(1,1):
        \begin{align*}
            \E[\sigma_t^2] &= \omega + \alpha \E[\varepsilon_{t-1}^2] + \beta \E[\sigma_{t-1}^2] \\
            \bar{\sigma}^2 &= \omega + \alpha \bar{\sigma}^2 + \beta \bar{\sigma}^2 \\
            \bar{\sigma}^2 (1 - \alpha - \beta) &= \omega \\
            \bar{\sigma}^2 &= \frac{\omega}{1 - \alpha - \beta}
        \end{align*}
    \end{block}
    \quantlet{TSA\_ch5\_garch\_sim}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_garch_sim}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 5
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 5}
    \begin{block}{Ce este ``leverage effect''?}
        \begin{enumerate}[(A)]
            \item Șocurile pozitive cresc volatilitatea mai mult decât cele negative
            \item Șocurile negative cresc volatilitatea mai mult decât cele pozitive
            \item Volatilitatea este independentă de semnul șocurilor
            \item Randamentele sunt asimetrice
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 5}
    \begin{exampleblock}{Răspuns Corect: (B)}
        \textbf{Șocurile negative cresc volatilitatea mai mult decât cele pozitive}
    \end{exampleblock}

    \pause
    \begin{block}{Explicație}
        \begin{itemize}
            \item Observat empiric pe piețele de acțiuni
            \item Când prețurile scad, gradul de îndatorare al firmei crește (datoria devine mai mare relativă la capitaluri)
            \item Aceasta face firma mai riscantă $\Rightarrow$ volatilitate mai mare
            \item GARCH standard \textbf{nu poate} captura acest efect (depinde de $\varepsilon^2$)
            \item Soluții: \textbf{EGARCH}, \textbf{GJR-GARCH}, \textbf{TGARCH}
        \end{itemize}
    \end{block}
    \quantlet{TSA\_ch5\_nic}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_nic}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 6
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 6}
    \begin{block}{În modelul EGARCH, parametrul $\gamma$ negativ indică:}
        \begin{enumerate}[(A)]
            \item Absența leverage effect
            \item Prezența leverage effect
            \item Volatilitate constantă
            \item Model nestationar
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 6}
    \begin{exampleblock}{Răspuns Corect: (B)}
        \textbf{Prezența leverage effect}
    \end{exampleblock}

    \pause
    \begin{block}{EGARCH(1,1)}
        \[
            \ln(\sigma_t^2) = \omega + \alpha (|z_{t-1}| - \E[|z|]) + \gamma z_{t-1} + \beta \ln(\sigma_{t-1}^2)
        \]

        \begin{itemize}
            \item $\gamma < 0$: șoc negativ ($z < 0$) $\Rightarrow$ crește $\ln(\sigma_t^2)$
            \item $\gamma > 0$: efect invers (mai rar întâlnit)
            \item $\gamma = 0$: efect simetric (ca GARCH)
        \end{itemize}
    \end{block}
    \quantlet{TSA\_ch5\_egarch\_sim}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_egarch_sim}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 7
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 7}
    \begin{block}{Care este principalul avantaj al EGARCH față de GARCH?}
        \begin{enumerate}[(A)]
            \item Este mai rapid de estimat
            \item Nu necesită restricții de non-negativitate
            \item Are mai puțini parametri
            \item Este mai ușor de interpretat
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 7}
    \begin{exampleblock}{Răspuns Corect: (B)}
        \textbf{Nu necesită restricții de non-negativitate}
    \end{exampleblock}

    \pause
    \begin{block}{Avantajele EGARCH}
        \begin{itemize}
            \item Modelează $\ln(\sigma_t^2)$, nu $\sigma_t^2$
            \item $\sigma_t^2 = e^{\ln(\sigma_t^2)} > 0$ \textbf{automat}, indiferent de valorile parametrilor
            \item GARCH necesită $\omega > 0$, $\alpha \geq 0$, $\beta \geq 0$
            \item La estimare, aceste restricții pot cauza probleme de convergență
        \end{itemize}
    \end{block}
    \quantlet{TSA\_ch5\_egarch\_sim}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_egarch_sim}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 8
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 8}
    \begin{block}{Ce test folosim pentru a detecta efecte ARCH în reziduuri?}
        \begin{enumerate}[(A)]
            \item Testul Dickey-Fuller
            \item Testul Ljung-Box pe reziduuri
            \item Testul Engle (ARCH-LM)
            \item Testul Breusch-Pagan
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 8}
    \begin{exampleblock}{Răspuns Corect: (C)}
        \textbf{Testul Engle (ARCH-LM)}
    \end{exampleblock}

    \pause
    \begin{block}{Procedura Testului ARCH-LM}
        \begin{enumerate}
            \item Estimează modelul pentru medie, obține reziduurile $\hat{\varepsilon}_t$
            \item Calculează $\hat{\varepsilon}_t^2$
            \item Regresează: $\hat{\varepsilon}_t^2 = \beta_0 + \beta_1 \hat{\varepsilon}_{t-1}^2 + \cdots + \beta_q \hat{\varepsilon}_{t-q}^2 + u_t$
            \item Statistica: $LM = T \cdot R^2 \sim \chi^2(q)$ sub $H_0$
        \end{enumerate}

        $H_0$: Nu există efecte ARCH $\quad$ $H_1$: Există efecte ARCH
    \end{block}
    \quantlet{TSA\_ch5\_btc\_arch}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_btc_arch}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 9
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 9}
    \begin{block}{Pentru S\&P 500, valorile tipice ale $\alpha + \beta$ în GARCH(1,1) sunt:}
        \begin{enumerate}[(A)]
            \item 0.50 -- 0.70
            \item 0.70 -- 0.85
            \item 0.95 -- 0.99
            \item Mai mare decât 1
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 9}
    \begin{exampleblock}{Răspuns Corect: (C)}
        \textbf{0.95 -- 0.99}
    \end{exampleblock}

    \pause
    \begin{block}{Volatilitate Foarte Persistentă}
        \begin{itemize}
            \item Seriile financiare au volatilitate foarte persistentă
            \item $\alpha + \beta \approx 0.98$ pentru S\&P 500
            \item Half-life: $HL = \frac{\ln(0.5)}{\ln(\alpha + \beta)} \approx 35-60$ zile
            \item Aceasta înseamnă că un șoc de volatilitate se disipează în câteva luni
        \end{itemize}

        \vspace{0.3cm}
        \begin{center}
            \begin{tabular}{lc}
                \toprule
                \textbf{Serie} & $\bm{\alpha + \beta}$ \\
                \midrule
                S\&P 500 & 0.97--0.99 \\
                Bitcoin & 0.90--0.98 \\
                EUR/USD & 0.96--0.99 \\
                \bottomrule
            \end{tabular}
        \end{center}
    \end{block}
    \quantlet{TSA\_ch5\_sp500\_garch}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_sp500_garch}
\end{frame}

%-----------------------------------------------------------------------------
% Quiz 10
%-----------------------------------------------------------------------------
\begin{frame}{Întrebarea 10}
    \begin{block}{Care distribuție este cel mai des folosită pentru inovațiile GARCH pentru a captura cozile groase?}
        \begin{enumerate}[(A)]
            \item Normală
            \item Uniformă
            \item Student-t
            \item Exponențială
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Răspuns Întrebarea 10}
    \begin{exampleblock}{Răspuns Corect: (C)}
        \textbf{Student-t}
    \end{exampleblock}

    \pause
    \begin{block}{Distribuții pentru Inovații}
        \begin{itemize}
            \item \textbf{Normală}: standard, dar subestimează riscul extrem
            \item \textbf{Student-t}: cozi groase, parametru $\nu$ (grade de libertate)
            \item \textbf{GED}: Generalized Error Distribution, flexibilă
            \item \textbf{Skewed Student-t}: asimetrie + cozi groase
        \end{itemize}

        \vspace{0.3cm}
        Pentru S\&P 500: $\nu \approx 5-8$ (cozi semnificativ mai groase decât normala)
    \end{block}
    \quantlet{TSA\_ch5\_stylized}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_stylized}
\end{frame}

%=============================================================================
% SECTION 2: TRUE/FALSE
%=============================================================================
\section{Întrebări Adevărat/Fals}

\begin{frame}{Adevărat sau Fals?}
    \begin{enumerate}
        \item Modelele ARIMA pot captura volatility clustering.

        \vspace{0.3cm}

        \item În GARCH(1,1), dacă $\alpha + \beta = 1$, modelul se numește IGARCH.

        \vspace{0.3cm}

        \item GJR-GARCH folosește o variabilă indicator pentru șocuri negative.

        \vspace{0.3cm}

        \item Prognoza volatilității GARCH converge către zero pe termen lung.

        \vspace{0.3cm}

        \item EGARCH poate avea parametri negativi fără a genera varianță negativă.

        \vspace{0.3cm}

        \item Value at Risk (VaR) poate fi calculat folosind prognoza volatilității GARCH.
    \end{enumerate}
\end{frame}

\begin{frame}{Răspunsuri Adevărat/Fals}
    \begin{enumerate}
        \item \textbf{FALS} --- ARIMA presupune varianță constantă; GARCH modelează volatilitatea.

        \vspace{0.2cm}

        \item \textbf{ADEVĂRAT} --- IGARCH = Integrated GARCH, volatilitatea are rădăcină unitară.

        \vspace{0.2cm}

        \item \textbf{ADEVĂRAT} --- $I_{t-1} = 1$ dacă $\varepsilon_{t-1} < 0$, altfel 0.

        \vspace{0.2cm}

        \item \textbf{FALS} --- Converge către varianța necondiționată $\bar{\sigma}^2$, nu zero.

        \vspace{0.2cm}

        \item \textbf{ADEVĂRAT} --- Modelează $\ln(\sigma_t^2)$, deci $\sigma_t^2 = e^{\ln(\sigma_t^2)} > 0$ mereu.

        \vspace{0.2cm}

        \item \textbf{ADEVĂRAT} --- $\text{VaR}_\alpha = z_\alpha \cdot \sigma_{t+1}$ (pentru medie zero).
    \end{enumerate}
\end{frame}

%=============================================================================
% SECTION 3: PRACTICE PROBLEMS
%=============================================================================
\section{Probleme Practice}

\begin{frame}{Problema 1: Calculul Varianței Necondiționate}
    \begin{block}{Enunț}
        Un model GARCH(1,1) are parametrii estimați:
        \begin{itemize}
            \item $\omega = 0.000002$
            \item $\alpha = 0.08$
            \item $\beta = 0.90$
        \end{itemize}

        \vspace{0.3cm}
        Calculați:
        \begin{enumerate}[(a)]
            \item Varianța necondiționată zilnică
            \item Volatilitatea necondiționată zilnică (ca procent)
            \item Volatilitatea anualizată (presupunând 252 zile de tranzacționare)
            \item Half-life-ul volatilității
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Soluție Problema 1}
    \begin{exampleblock}{Răspunsuri}
        \begin{enumerate}[(a)]
            \item $\bar{\sigma}^2 = \dfrac{\omega}{1 - \alpha - \beta} = \dfrac{0.000002}{1 - 0.08 - 0.90} = \dfrac{0.000002}{0.02} = 0.0001$

            \vspace{0.2cm}

            \item $\bar{\sigma} = \sqrt{0.0001} = 0.01 = 1\%$ pe zi

            \vspace{0.2cm}

            \item $\sigma_{\text{annual}} = \bar{\sigma} \times \sqrt{252} = 0.01 \times 15.87 = 15.87\%$ pe an

            \vspace{0.2cm}

            \item $HL = \dfrac{\ln(0.5)}{\ln(\alpha + \beta)} = \dfrac{\ln(0.5)}{\ln(0.98)} = \dfrac{-0.693}{-0.0202} \approx 34$ zile
        \end{enumerate}
    \end{exampleblock}

    \begin{block}{Interpretare}
        Volatilitatea de 15.87\% pe an este tipică pentru un indice bursier. Half-life de 34 zile înseamnă că un șoc de volatilitate se reduce la jumătate după aproximativ 7 săptămâni.
    \end{block}
    \quantlet{TSA\_ch5\_convergence}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_convergence}
\end{frame}

\begin{frame}{Problema 2: Prognoză Volatilitate}
    \begin{block}{Enunț}
        Folosind modelul GARCH(1,1) de la Problema 1:
        \begin{itemize}
            \item $\omega = 0.000002$, $\alpha = 0.08$, $\beta = 0.90$
            \item La momentul $T$: $\varepsilon_T = -0.03$ (scădere de 3\%), $\sigma_T^2 = 0.0004$
        \end{itemize}

        \vspace{0.3cm}
        Calculați prognoza volatilității pentru:
        \begin{enumerate}[(a)]
            \item $\sigma_{T+1}^2$ (un pas înainte)
            \item $\sigma_{T+5}^2$ (cinci pași înainte)
            \item $\sigma_{T+100}^2$ (o sută de pași înainte)
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Soluție Problema 2}
    \begin{exampleblock}{Răspunsuri}
        \begin{enumerate}[(a)]
            \item $\sigma_{T+1}^2 = \omega + \alpha \varepsilon_T^2 + \beta \sigma_T^2$
            \[
                = 0.000002 + 0.08 \times (0.03)^2 + 0.90 \times 0.0004 = 0.000434
            \]
            Volatilitate: $\sqrt{0.000434} = 2.08\%$

            \vspace{0.2cm}

            \item $\E_T[\sigma_{T+5}^2] = \bar{\sigma}^2 + (0.98)^4 (\sigma_{T+1}^2 - \bar{\sigma}^2)$
            \[
                = 0.0001 + 0.922 \times (0.000434 - 0.0001) = 0.000408
            \]
            Volatilitate: $\sqrt{0.000408} = 2.02\%$

            \vspace{0.2cm}

            \item $\E_T[\sigma_{T+100}^2] = 0.0001 + (0.98)^{99} \times 0.000334 \approx 0.000145$

            Volatilitate: $\sqrt{0.000145} = 1.20\%$ (aproape de $\bar{\sigma} = 1\%$)
        \end{enumerate}
    \end{exampleblock}
    \quantlet{TSA\_ch5\_vol\_forecast}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_vol_forecast}
\end{frame}

\begin{frame}{Problema 3: Value at Risk}
    \begin{block}{Enunț}
        Un portofoliu de 1.000.000 EUR este investit în acțiuni ale căror randamente sunt modelate prin GARCH(1,1).

        Prognoza volatilității pentru mâine: $\sigma_{T+1} = 2\%$ zilnic.

        Presupunând randamente normal distribuite cu medie zero, calculați:
        \begin{enumerate}[(a)]
            \item VaR la 95\% (1 zi)
            \item VaR la 99\% (1 zi)
            \item VaR la 99\% (10 zile), folosind regula ``square root of time''
        \end{enumerate}

        \vspace{0.3cm}
        Cuantile: $z_{0.05} = 1.645$, $z_{0.01} = 2.326$
    \end{block}
\end{frame}

\begin{frame}{Soluție Problema 3}
    \begin{exampleblock}{Răspunsuri}
        \begin{enumerate}[(a)]
            \item VaR 95\% (1 zi):
            \[
                \text{VaR}_{95\%} = 1.645 \times 0.02 \times 1{,}000{,}000 = 32{,}900 \text{ EUR}
            \]

            \vspace{0.2cm}

            \item VaR 99\% (1 zi):
            \[
                \text{VaR}_{99\%} = 2.326 \times 0.02 \times 1{,}000{,}000 = 46{,}520 \text{ EUR}
            \]

            \vspace{0.2cm}

            \item VaR 99\% (10 zile):
            \[
                \text{VaR}_{99\%, 10d} = \text{VaR}_{99\%, 1d} \times \sqrt{10} = 46{,}520 \times 3.162 = 147{,}100 \text{ EUR}
            \]
        \end{enumerate}
    \end{exampleblock}

    \textit{Notă: regula de scalare $\sqrt{T}$ presupune randamente i.i.d., ceea ce contrazice structura de dependență GARCH.}

    \begin{alertblock}{Atenție}
        În practică, pentru Student-t, cuantilele sunt mai mari (cozi mai groase)!
    \end{alertblock}
    \quantlet{TSA\_ch5\_var\_es}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_var_es}
\end{frame}

\begin{frame}{Problema 4: Identificarea Modelului}
    \begin{block}{Enunț}
        Analizați următoarele rezultate ale estimării și identificați modelul:

        \vspace{0.3cm}
        \begin{center}
            \begin{tabular}{lcc}
                \toprule
                \textbf{Parametru} & \textbf{Estimat} & \textbf{Std. Error} \\
                \midrule
                $\omega$ & 0.0000015 & 0.0000005 \\
                $\alpha$ & 0.0550 & 0.0120 \\
                $\gamma$ & 0.0850 & 0.0180 \\
                $\beta$ & 0.9100 & 0.0150 \\
                \bottomrule
            \end{tabular}
        \end{center}

        \vspace{0.3cm}
        \begin{enumerate}[(a)]
            \item Ce model este acesta?
            \item Este prezent leverage effect?
            \item Care este impactul unui șoc negativ vs pozitiv?
            \item Este modelul stationar?
        \end{enumerate}
    \end{block}
\end{frame}

\begin{frame}{Soluție Problema 4}
    \begin{exampleblock}{Răspunsuri}
        \begin{enumerate}[(a)]
            \item \textbf{GJR-GARCH(1,1,1)} --- prezența parametrului $\gamma$ (threshold/asymmetry)

            \vspace{0.2cm}

            \item \textbf{Da, leverage effect prezent}: $\gamma = 0.085 > 0$ și semnificativ

            \vspace{0.2cm}

            \item Impact:
            \begin{itemize}
                \item Șoc pozitiv: impact = $\alpha = 0.055$
                \item Șoc negativ: impact = $\alpha + \gamma = 0.055 + 0.085 = 0.140$
                \item Șocurile negative au impact de \textbf{2.5x mai mare}!
            \end{itemize}

            \vspace{0.2cm}

            \item Stationaritate: $\alpha + \gamma/2 + \beta = 0.055 + 0.0425 + 0.91 = 1.0075$

            \textbf{Valoarea depășește ușor pragul de 1} --- tehnic nestaționar (în covarianță), foarte aproape de IGARCH.
        \end{enumerate}
    \end{exampleblock}
    \quantlet{TSA\_ch5\_gjr\_sim}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_gjr_sim}
\end{frame}

%=============================================================================
% SECTION 4: PYTHON WORKFLOW
%=============================================================================
\section{Flux de Lucru Python}

\begin{frame}[fragile]{Pasul 1: Încărcare și Pregătire Date}
\begin{lstlisting}
import pandas as pd
import numpy as np
import yfinance as yf
from arch import arch_model
from arch.unitroot import ADF

# Descarcare date S&P 500
data = yf.download('^GSPC', start='2010-01-01', end='2024-01-01')
returns = 100 * data['Adj Close'].pct_change().dropna()

# Verificare stationaritate (ADF test)
adf = ADF(returns)
print(f'ADF statistic: {adf.stat:.4f}')
print(f'p-value: {adf.pvalue:.4f}')
\end{lstlisting}
    \quantlet{TSA\_ch5\_sp500}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_sp500}
\end{frame}

\begin{frame}[fragile]{Pasul 2: Test Efecte ARCH}
\begin{lstlisting}
from statsmodels.stats.diagnostic import het_arch

# Test ARCH-LM pe reziduuri
residuals = returns - returns.mean()
lm_stat, lm_pvalue, f_stat, f_pvalue = het_arch(residuals, nlags=10)

print(f'ARCH-LM statistic: {lm_stat:.4f}')
print(f'p-value: {lm_pvalue:.4f}')

if lm_pvalue < 0.05:
    print('=> Efecte ARCH prezente! Se justifica GARCH.')
\end{lstlisting}
    \quantlet{TSA\_ch5\_btc\_arch}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_btc_arch}
\end{frame}

\begin{frame}[fragile]{Pasul 3: Estimare Modele}
\begin{lstlisting}
# GARCH(1,1) cu distributie Student-t
model_garch = arch_model(returns, vol='Garch', p=1, q=1, dist='t')
res_garch = model_garch.fit(disp='off')
print(res_garch.summary())

# GJR-GARCH(1,1,1)
model_gjr = arch_model(returns, vol='Garch', p=1, o=1, q=1, dist='t')
res_gjr = model_gjr.fit(disp='off')

# EGARCH(1,1)
model_egarch = arch_model(returns, vol='EGARCH', p=1, q=1, dist='t')
res_egarch = model_egarch.fit(disp='off')

# Comparare AIC
print(f'GARCH AIC: {res_garch.aic:.2f}')
print(f'GJR AIC: {res_gjr.aic:.2f}')
print(f'EGARCH AIC: {res_egarch.aic:.2f}')
\end{lstlisting}
    \quantlet{TSA\_ch5\_sp500\_comp}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_sp500_comp}
\end{frame}

\begin{frame}[fragile]{Pasul 4: Diagnostic}
\begin{lstlisting}
# Reziduuri standardizate
std_resid = res_gjr.std_resid

# Test Ljung-Box pe reziduuri^2
from statsmodels.stats.diagnostic import acorr_ljungbox
lb_test = acorr_ljungbox(std_resid**2, lags=10, return_df=True)
print(lb_test)

# Verificare efecte ARCH reziduale
lm_stat2, lm_pval2, _, _ = het_arch(std_resid, nlags=5)
print(f'ARCH-LM reziduuri: stat={lm_stat2:.2f}, p={lm_pval2:.4f}')

if lm_pval2 > 0.05:
    print('=> Nu mai sunt efecte ARCH reziduale. Model OK!')
\end{lstlisting}
    \quantlet{TSA\_ch5\_diagnostic}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_diagnostic}
\end{frame}

\begin{frame}[fragile]{Pasul 5: Prognoză și VaR}
\begin{lstlisting}
# Forecast 10 zile
forecasts = res_gjr.forecast(horizon=10)
vol_forecast = np.sqrt(forecasts.variance.values[-1, :])

print('Volatility forecast (%):', vol_forecast)

# Value at Risk 99%
portfolio_value = 1_000_000
VaR_99 = 2.326 * vol_forecast[0] / 100 * portfolio_value
print(f'VaR 99% (1 zi): {VaR_99:,.0f} EUR')

# VaR 10 zile
VaR_99_10d = VaR_99 * np.sqrt(10)
print(f'VaR 99% (10 zile): {VaR_99_10d:,.0f} EUR')
\end{lstlisting}
    \quantlet{TSA\_ch5\_sp500\_var}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_sp500_var}
\end{frame}

%=============================================================================
% EXERCIȚIU CU ASISTENȚĂ AI
%=============================================================================
\section{Exercițiu cu asistență AI}

\begin{frame}{Exercițiu AI: Gândire critică}
    \vspace{-3mm}
    \begin{block}{\footnotesize Prompt de testat în ChatGPT / Claude / Copilot}
        {\footnotesize
        ``Folosind yfinance, descarcă prețurile zilnice de închidere NASDAQ Composite (\^{}IXIC) din 2019-01-01 până în 2024-12-31 (aprox.\ 1.500 observații). Calculează randamentele logaritmice zilnice. Testează efectele ARCH cu testul Engle LM. Estimează un GARCH(1,1) și un GJR-GARCH(1,1) și compară-le cu AIC. Prognozează volatilitatea pe 20 de zile. Calculează VaR la 1\% din distribuția condițională. Vreau cod Python complet cu grafice.''
        }
    \end{block}
    \vspace{-2mm}
    {\footnotesize
    \textbf{Exercițiu}:
    \begin{enumerate}\setlength{\itemsep}{0pt}
        \item Rulați prompt-ul într-un LLM la alegere și analizați critic răspunsul.
        \item Separă ecuația mediei de ecuația varianței? Specifică distribuția inovațiilor?
        \item Detectează efectul de levier (asimetrie)? GJR-GARCH arată $\gamma > 0$?
        \item Verifică constrângerea de staționaritate $\alpha + \beta < 1$? Discută persistența?
        \item VaR-ul e calculat din distribuția condițională (nu necondiționată)?
    \end{enumerate}
    }
    \vspace{-2mm}
    \begin{alertblock}{}
        {\footnotesize \textbf{Atenție}: Codul generat de AI poate rula fără erori și arăta profesional. \textit{Asta nu înseamnă că e corect.}}
    \end{alertblock}
\end{frame}

%=============================================================================
% SECTION 5: SUMMARY
%=============================================================================
\section{Rezumat}

\begin{frame}{Rezumat Seminar}
    \begin{block}{Concepte Cheie}
        \begin{itemize}
            \item \textbf{ARCH}: varianța condiționată depinde de șocuri trecute
            \item \textbf{GARCH}: adaugă persistența prin lag-uri ale varianței
            \item \textbf{EGARCH/GJR}: captează leverage effect (asimetrie)
            \item \textbf{Stationaritate}: $\alpha + \beta < 1$
        \end{itemize}
    \end{block}

    \begin{block}{Formule Importante}
        \begin{itemize}
            \item Varianța necondiționată: $\bar{\sigma}^2 = \frac{\omega}{1 - \alpha - \beta}$
            \item Half-life: $HL = \frac{\ln(0.5)}{\ln(\alpha + \beta)}$
            \item VaR: $\text{VaR}_\alpha = z_\alpha \cdot \sigma \cdot V$
        \end{itemize}
    \end{block}

    \begin{alertblock}{Sfat Practic}
        Folosiți distribuția Student-t pentru a captura cozile groase. Verificați absența efectelor ARCH în reziduuri!
    \end{alertblock}
\end{frame}

\begin{frame}{Exerciții pentru Acasă}
    \begin{block}{Exercițiul 1}
        Descărcați randamentele zilnice pentru BET (indicele BVB) și estimați un model GARCH(1,1). Comparați persistența ($\alpha + \beta$) cu S\&P 500.
    \end{block}

    \begin{block}{Exercițiul 2}
        Pentru Bitcoin, estimați GARCH, EGARCH și GJR-GARCH. Este leverage effect prezent pentru criptomonede?
    \end{block}

    \begin{block}{Exercițiul 3}
        Calculați VaR zilnic pentru un portofoliu de 100.000 EUR investit în EUR/USD, folosind volatilitatea GARCH prognozată.
    \end{block}

    \begin{block}{Exercițiul 4}
        Compară prognoza volatilității GARCH(1,1) cu volatilitatea realizată (suma pătratelor randamentelor) pentru o perioadă de 20 de zile.
    \end{block}
    \quantlet{TSA\_ch5\_rolling\_forecast}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_rolling_forecast}
\end{frame}

%=============================================================================
% EXERCIȚIU DE REPLICARE
%=============================================================================
\begin{frame}{Exercițiu de Replicare: Engle (1982)}
    \begin{cminipage}{0.95\textwidth}
        \begin{block}{Obiectiv}
            Replicați Tabelul 3 din Engle (1982) --- testul ARCH pe inflația din Marea Britanie.
        \end{block}
        \begin{enumerate}\setlength{\itemsep}{2pt}
            {\small
            \item Descărcați inflația trimestrială din România (IPC, INS, 1997--2024)
            \item Estimați un model AR(4) pentru inflație: $\pi_t = c + \phi_1 \pi_{t-1} + \cdots + \phi_4 \pi_{t-4} + \varepsilon_t$
            \item Calculați reziduurile $\hat{\varepsilon}_t$ și testați efecte ARCH: regresați $\hat{\varepsilon}_t^2$ pe $\hat{\varepsilon}_{t-1}^2, \ldots, \hat{\varepsilon}_{t-4}^2$
            \item Raportați statistica $LM = T \cdot R^2$ și comparați cu $\chi^2(4)$
            \item Estimați un model ARCH(4) și comparați cu rezultatele originale ale lui Engle
            \item \textbf{Întrebare}: Inflația românească prezintă efecte ARCH mai puternice decât cea britanică? De ce?
            }
        \end{enumerate}
        {\tiny Ref: Engle, R.F.\ (1982). Autoregressive Conditional Heteroscedasticity with Estimates of the Variance of United Kingdom Inflation, \textit{Econometrica}, 50(4), 987--1007.}
    \end{cminipage}
    \quantlet{TSA\_ch5\_arch\_sim}{https://github.com/QuantLet/TSA/tree/main/TSA_ch5/TSA_ch5_arch_sim}
\end{frame}

%=============================================================================
% THANK YOU SLIDE
%=============================================================================
\begin{frame}[plain]
    \begin{tikzpicture}[remember picture, overlay]
        \fill[IDAred] (current page.north west) rectangle ([yshift=-0.15cm]current page.north east);
    \end{tikzpicture}
    \vfill
    \begin{center}
        {\Huge\textbf{\textcolor{MainBlue}{Vă mulțumesc!}}}\\[1cm]
        {\Large Întrebări?}\\[0.5cm]
        {\large\texttt{danpele@ase.ro}}
    \end{center}
    \vfill
    \begin{tikzpicture}[remember picture, overlay]
        \fill[IDAred] (current page.south west) rectangle ([yshift=0.15cm]current page.south east);
    \end{tikzpicture}
\end{frame}

\end{document}
